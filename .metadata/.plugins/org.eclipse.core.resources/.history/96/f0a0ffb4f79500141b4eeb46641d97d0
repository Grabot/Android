package onzichtbaar.net.Android.CityBuilder.load;

public class TouchInput 
{
	private firstX = 0;
	private firstY = 0;
	
	public TouchInput()
	{
		
	}
	
	public void MapScroll( boolean touchedDown, boolean firstPress, float firstX, float firstY, float touchX, float touchY )
	{
		
		if( touchedDown && firstPress )
		{
			firstPress = false;
			firstX = touchX;
			firstY = touchY;
		}
		else if( touchedDown && !firstPress )
		{
			if( ((currentX + offsetX) <= -280) && offsetX < 0 )
			{
				touchSideRight = true;
			}
			else if( ((currentX + offsetX) >= 280) && offsetX > 0 )
			{
				touchSideLeft = true;
			}
			else
			{
				if(!touchSideRight || !touchSideLeft )
				{
					offsetX = ((firstX - touchX)*currentZoom);
				}
			}
			
			if( ((currentY - offsetY) <= -150) && offsetY > 0 )
			{
				touchUp = true;
			}
			else if( ((currentY - offsetY) >= 150) && offsetY < 0 )
			{
				touchBottom = true;
			}
			else
			{
				offsetY = ((firstY - touchY)*currentZoom);
			}
		}
		
		if( !touchedDown )
		{
			firstPress = true;
			currentX = (currentX + offsetX);
			currentY = (currentY - offsetY);
			offsetX = 0;
			offsetY = 0;
			
			if( touchSideRight )
			{
				currentX = -280;
				touchSideRight = false;
			}
			else if( touchSideLeft )
			{
				currentX = 280;
				touchSideLeft = false;
			}
			
			if( touchUp )
			{
				currentY = -150;
				touchUp = false;
			}
			else if( touchBottom )
			{
				currentY = 150;
				touchBottom = false;
			}
		}
	}
	
	public void MapZoom()
	{
		if( distance != 0 )
		{
			if( touchedDown && firstPinch )
			{
				firstPinch = false;
				
				firstDistance = distance;
			}
		}
		else
		{
			firstPinch = true;
		}
		
		
		if( touchedDown && !firstPinch )
		{

			//Gdx.app.log( "Zoomtest", "zoomSpeed: " + zoomSpeed );

			zoomSpeed = firstDistance - distance;
			
			if( camera.zoom <= 0.2 && zoomSpeed <= 0 )
			{
				currentZoom = 0.2f;
				zoomSpeed = 0;
			}
			else if( camera.zoom >= 0.5 && zoomSpeed > 0)
			{
				currentZoom = 0.5f;
				zoomSpeed = 0;
			}
			else
			{
				camera.zoom = (currentZoom + (zoomSpeed/1000));
			}
		}
		
		if( !touchedDown )
		{
			currentZoom = (currentZoom + (zoomSpeed/1000));
			zoomSpeed = 0;
			firstPinch = true;
		}
		
		if( down_pressed )
		{
			if(camera.zoom >= 0.5f )
			{
				
			}
			else
			{
				camera.zoom += 0.1;
				currentZoom += 0.1;
			}
		}
		else if( up_pressed )
		{
			if(camera.zoom <= 0.2 )
			{
				
			}
			else
			{
				camera.zoom -= 0.1;
				currentZoom -= 0.1;
			}
		}
	}

}
